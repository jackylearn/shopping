{"version":3,"sources":["redux/constants/authConstants.js","redux/actions/authActions.js","redux/constants/bookConstants.js","redux/constants/cartConstants.js","redux/actions/cartActions.js","components/Navbar.js","components/Modal.js","components/BookPreview.js","components/CartPreview.js","components/SideDrawer.js","components/CartItem.js","screens/CartScreen.js","redux/constants/modalConstants.js","redux/actions/modalActions.js","components/Book.js","screens/HomeScreen.js","redux/actions/bookActions.js","screens/BookScreen.js","screens/SuccessScreen.js","components/Purchased.js","screens/PurchaseScreen.js","components/PrivateRoute.js","App.js","reportWebVitals.js","redux/store.js","redux/reducers/cartReducers.js","redux/reducers/bookReducers.js","redux/reducers/authReducers.js","redux/reducers/modalReducers.js","index.js"],"names":["LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER_SUCCESS","REGISTER_FAILURE","LOGOUT_SUCCESS","UPDATE_PURCHASED_BOOKS","FOLLOW_BOOK","FOLLOW_BOOK_CANCEL","logout","dispatch","getState","a","axios","get","data","type","actionTypes","payload","localStorage","setItem","JSON","stringify","auth","removeItem","followBook","id","userId","put","followedBooks","followBookCancel","GET_BOOKS_REQUEST","GET_BOOKS_SUCCESS","GET_BOOKS_FAILURE","GET_BOOK_DETAILS_REQUEST","GET_BOOK_DETAILS_SUCCESS","GET_BOOK_DETAILS_FAILURE","GET_BOOK_DETAILS_RESET","ADD_TO_CART","REMOVE_FROM_CART","CART_RESET","CHECKOUT_SUCCESS","CHECKOUT_FAILURE","addToCart","_id","title","author","description","imageUrl","price","currency","cart","removeFromCart","resetCart","Navbar","loginButton","registerButton","showCartPreview","showSideDrawer","useSelector","state","loginStatus","login","cartItems","Object","keys","useDispatch","to","message","user","onClick","icon","length","Modal","name","closeAll","status","handleFormSwitch","link","useState","passwordVisibility","setPwdVisibility","username","setUserName","password","setPassword","error","modal","isLoginModalShown","isRegisterModalShown","register","useEffect","document","querySelector","innerText","toLowerCase","className","htmlFor","autoComplete","placeholder","onChange","event","target","value","required","prev","post","userDetails","purchasedBooks","purchased","follow","Error","response","BookPreview","itemId","cartItem","src","alt","slice","CartPreview","itemsId","map","Math","floor","reduce","sum","SideDrawer","CartItem","CartScreen","checkoutUrl","payment","destination","window","location","replace","alert","items","paymentUrl","OPEN_LOGIN_MODAL","CLOSE_LOGIN_MODAL","OPEN_REGISTER_MODAL","CLOSE_REGISTER_MODAL","openLoginModal","openRegisterModal","Book","item","getElementById","classList","toggle","HomeScreen","getBooks","books","loading","now","Date","expire","getTime","book","BookScreen","match","booksInCart","filter","params","addToCartHandler","followBookHandler","SuccessScreen","history","timeLeft","setTimer","then","setTimeout","push","timer","clearTimeout","Purchased","bookInfo","expires","readerHandler","success","PurchaseScreen","purchasedBooksId","bookId","PrivateRoute","Component","component","rest","render","props","App","isCartPreviewShown","setCartPreview","isSideDrawerShown","setSideDrawer","loginButtonPressed","registerButtonPressed","exact","path","BooksScreen","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","reducer","combineReducers","action","getBookDetails","middleware","thunk","INITIAL_STATE","getItem","parse","store","createStore","composeWithDevTools","applyMiddleware","library","add","faShoppingCart","faEye","faEyeSlash","faHeart","faTrash","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.9d88ea44.chunk.js","sourcesContent":["export const LOGIN_SUCCESS = \"LOGIN_SUCCESS\"\r\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\"\r\n\r\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\"\r\nexport const REGISTER_FAILURE = \"REGISTER_FAILURE\"\r\n\r\nexport const LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\"\r\n\r\nexport const UPDATE_PURCHASED_BOOKS = \"UPDATE_PURCHASED_BOOKS\"\r\n\r\nexport const FOLLOW_BOOK = \"FOLLOW_BOOK\"\r\nexport const FOLLOW_BOOK_CANCEL = \"FOLLOW_BOOK_CANCEL\"\r\n","import * as actionTypes from '../constants/authConstants.js'\r\nimport axios from 'axios'\r\n\r\nexport const login = (name, password) => async (dispatch, getState) => {\r\n    try {\r\n        const { data: user } = await axios.post('/auth/login', { name, password });\r\n        const { data: userDetails } = await axios.get(`/api/user/${user.id}`)\r\n        dispatch({\r\n            type: actionTypes.LOGIN_SUCCESS,\r\n            payload: {\r\n                ...user,\r\n                purchasedBooks: userDetails.purchased,\r\n                followedBooks: userDetails.follow\r\n            }\r\n        })\r\n        localStorage.setItem('user', JSON.stringify(getState().auth))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: actionTypes.LOGIN_FAILURE,\r\n            payload: 'Invalid username or password'\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport const logout = () => async (dispatch, getState) => {\r\n    const { data } = await axios.get('/auth/logout');\r\n    dispatch({\r\n        type: actionTypes.LOGOUT_SUCCESS,\r\n        payload: data\r\n    })\r\n    localStorage.setItem('user', JSON.stringify(getState().auth))\r\n    localStorage.removeItem('cart')\r\n    localStorage.removeItem('follow')\r\n}\r\n\r\nexport const register = (name, password) => async (dispatch, getState) => {\r\n    try {\r\n        const { data } = await axios.post('/auth/register', { name, password });\r\n\r\n        if (data.error) throw new Error(data.error)\r\n        dispatch({\r\n            type: actionTypes.REGISTER_SUCCESS,\r\n            payload: data\r\n        })\r\n        localStorage.setItem('user', JSON.stringify(getState().auth))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: actionTypes.REGISTER_FAILURE,\r\n            payload: err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message\r\n        })\r\n    }\r\n}\r\n\r\nexport const updatePurchasedBooks = () => async (dispatch, getState) => {\r\n    const userId = getState().auth.data.id\r\n    const { data } = await axios.get(`/api/user/${userId}`)\r\n    dispatch({\r\n        type: actionTypes.UPDATE_PURCHASED_BOOKS,\r\n        payload: data.purchased\r\n    })\r\n}\r\n\r\nexport const followBook = (id) => (dispatch, getState) => {\r\n    dispatch({\r\n        type: actionTypes.FOLLOW_BOOK,\r\n        payload: id\r\n    })\r\n    localStorage.setItem('user', JSON.stringify(getState().auth))\r\n    const userId = getState().auth.data.id\r\n    axios.put(`/api/user/${userId}/followedBooks`, { followedBooks: [id, true] })\r\n}\r\n\r\nexport const followBookCancel = (id) => (dispatch, getState) => {\r\n    dispatch({\r\n        type: actionTypes.FOLLOW_BOOK_CANCEL,\r\n        payload: id\r\n    })\r\n    localStorage.setItem('user', JSON.stringify(getState().auth))\r\n    const userId = getState().auth.data.id\r\n    axios.put(`/api/user/${userId}/followedBooks`, { followedBooks: [id, false] })\r\n}","export const GET_BOOKS_REQUEST = \"GET_BOOKS_REQUEST\";\r\nexport const GET_BOOKS_SUCCESS = \"GET_BOOKS_SUCCESS\";\r\nexport const GET_BOOKS_FAILURE = \"GET_BOOKS_FAILURE\";\r\n\r\nexport const GET_BOOK_DETAILS_REQUEST = \"GET_BOOK_DETAILS_REQUEST\";\r\nexport const GET_BOOK_DETAILS_SUCCESS = \"GET_BOOK_DETAILS_SUCCESS\";\r\nexport const GET_BOOK_DETAILS_FAILURE = \"GET_BOOK_DETAILS_FAILURE\";\r\nexport const GET_BOOK_DETAILS_RESET = \"GET_BOOK_DETAILS_RESET\";\r\n\r\n\r\n","export const ADD_TO_CART = \"ADD_TO_CART\";\r\nexport const REMOVE_FROM_CART = \"REMOVE_FROM_CART\";\r\nexport const CART_RESET = \"CART_RESET\";\r\n\r\nexport const CHECKOUT_REQUEST = \"CHECKOUT_REQUEST\";\r\nexport const CHECKOUT_SUCCESS = \"CHECKOUT_SUCCESS\";\r\nexport const CHECKOUT_FAILURE = \"CHECKOUT_FAILURE\";\r\n","import * as actionTypes from '../constants/cartConstants.js'\r\nimport axios from 'axios'\r\n\r\nexport const addToCart = (id) => async (dispatch, getState) => {\r\n    const { data } = await axios.get(`/api/books/${id}`)\r\n\r\n    dispatch({\r\n        type: actionTypes.ADD_TO_CART,\r\n        payload: {\r\n            [data._id]: {\r\n                title: data.title,\r\n                author: data.author,\r\n                description: data.description,\r\n                imageUrl: data.imageUrl,\r\n                price: data.price,\r\n                currency: data.currency,\r\n            }\r\n        }\r\n    })\r\n\r\n    localStorage.setItem('cart', JSON.stringify(getState().cart))\r\n};\r\n\r\nexport const removeFromCart = (id) => (dispatch, getState) => {\r\n    dispatch({\r\n        type: actionTypes.REMOVE_FROM_CART,\r\n        payload: id\r\n    })\r\n\r\n    localStorage.setItem('cart', JSON.stringify(getState().cart))\r\n}\r\n\r\nexport const resetCart = () => (dispatch, getState) => {\r\n    dispatch({ type: actionTypes.CART_RESET })\r\n    localStorage.setItem('cart', JSON.stringify(getState().cart))\r\n}\r\n\r\nexport const checkout = () => async (dispatch, getState) => {\r\n    try {\r\n        dispatch({ type: actionTypes.CHECKOUT_REQUEST })\r\n        const { data } = await axios.post('/payment/checkout', { items: Object.keys(getState().cart) })\r\n        dispatch({\r\n            type: actionTypes.CHECKOUT_SUCCESS,\r\n            destination: data.paymentUrl\r\n        })\r\n    } catch (err) {\r\n        dispatch({\r\n            type: actionTypes.CHECKOUT_FAILURE,\r\n            error: err.message\r\n        })\r\n    }\r\n}","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport './Navbar.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\n//redux actions\r\nimport { logout } from '../redux/actions/authActions.js'\r\nimport { resetFollowBook } from '../redux/actions/bookActions.js'\r\nimport { resetCart } from '../redux/actions/cartActions.js'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Navbar({ loginButton, registerButton, showCartPreview, showSideDrawer }) {\r\n\r\n    const { login: loginStatus, data } = useSelector(state => state.auth)\r\n    const cartItems = Object.keys(useSelector(state => state.cart))\r\n\r\n    const dispatch = useDispatch();\r\n    const logoutHandler = () => {\r\n        dispatch(logout())\r\n        dispatch(resetCart())\r\n    }\r\n\r\n    return (\r\n        <nav id=\"navbar\">\r\n            <Link to=\"/\" id=\"logo\">BookRental</Link>\r\n            <div id=\"nav-links\">\r\n                {loginStatus\r\n                    ?\r\n                    <>\r\n                        <span>\r\n                            <Link to=\"/user\" id=\"user\">\r\n                                <span>{data.message}</span>\r\n                                <span>{data.user || \"\"}</span>\r\n                            </Link>\r\n                        </span>\r\n                        <span onClick={logoutHandler}>Log Out</span>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        <span onClick={loginButton}>Login</span>\r\n                        <span onClick={registerButton}>Register</span>\r\n                    </>\r\n                }\r\n\r\n\r\n                <div id=\"cart-container\" onClick={showCartPreview}>\r\n                    <FontAwesomeIcon icon={[\"fas\", \"shopping-cart\"]} />\r\n                    <span>Cart</span>\r\n                    <span id=\"cart-count\">{cartItems.length}</span>\r\n                </div>\r\n            </div>\r\n            <div id=\"menu\" onClick={showSideDrawer}>\r\n                <div></div>\r\n                <div></div>\r\n                <div></div>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport './Modal.css'\r\n\r\nimport { login, register } from '../redux/actions/authActions.js'\r\n\r\n\r\nexport default function Modal({ name, closeAll, status, handleFormSwitch, message, link }) {\r\n\r\n    // private state for component only\r\n    const [passwordVisibility, setPwdVisibility] = useState(false)\r\n    const viewPassword = () => setPwdVisibility(prev => !prev)\r\n    const [username, setUserName] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    const usernameHandler = event => setUserName(event.target.value)\r\n    const passwordHandler = event => setPassword(event.target.value)\r\n\r\n    // public state \r\n    const { login: loginStatus, error } = useSelector(state => state.auth)\r\n    const { login: isLoginModalShown, register: isRegisterModalShown } = useSelector(state => state.modal)\r\n    const dispatch = useDispatch();\r\n    const modalSubmitHandler = () => {\r\n        if (name === \"Login\")\r\n            dispatch(login(username, password))\r\n        else\r\n            dispatch(register(username, password))\r\n        setUserName(\"\")\r\n        setPassword(\"\")\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!document) return\r\n        if (loginStatus) return closeAll()\r\n        if (isLoginModalShown)\r\n            document.querySelector('#login .auth-message').innerText = error || \"\"\r\n        else if (isRegisterModalShown)\r\n            document.querySelector('#register .auth-message').innerText = error || \"\"\r\n        return () => {\r\n            document.querySelector('#login .auth-message').innerText = \"\"\r\n            document.querySelector('#register .auth-message').innerText = \"\"\r\n        }\r\n\r\n    }, [loginStatus])\r\n\r\n    return (\r\n        <div id={name.toLowerCase()} className={status ? \"modal active\" : \"modal\"} >\r\n            <h2 className=\"modal-title\">{name}</h2>\r\n            <p className=\"auth-message\"></p>\r\n            <div className=\"form\">\r\n                <div className=\"form-content\">\r\n                    <label htmlFor=\"name\">Username</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name='name'\r\n                        autoComplete=\"off\"\r\n                        placeholder='username'\r\n                        onChange={usernameHandler}\r\n                        value={username}\r\n                        required />\r\n                </div>\r\n                <div className=\"form-content\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input\r\n                        type={passwordVisibility ? 'text' : 'password'}\r\n                        name='password'\r\n                        placeholder='password'\r\n                        onChange={passwordHandler}\r\n                        value={password}\r\n                        required />\r\n                    <div className=\"visibility\">\r\n                        <FontAwesomeIcon icon={passwordVisibility ? ['fas', 'eye-slash'] : ['fas', 'eye']} onClick={viewPassword} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"btn modal-btn\" onClick={modalSubmitHandler}>{name}</div>\r\n            </div>\r\n            <p>{message}  <span className=\"modal-switch\" onClick={handleFormSwitch}>{link}</span></p>\r\n        </div>\r\n\r\n    )\r\n}","import './BookPreview.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { removeFromCart } from '../redux/actions/cartActions.js'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nexport default function BookPreview({ itemId }) {\r\n\r\n    const dispatch = useDispatch();\r\n    const deleteItemHandler = () => dispatch(removeFromCart(itemId))\r\n\r\n    const cartItem = useSelector(state => state.cart)[itemId]\r\n\r\n    return (\r\n        <div className='book-preview'>\r\n            <div className='preview-img'>\r\n                <img src={cartItem?.imageUrl} alt={cartItem?.title} />\r\n            </div>\r\n            <div className='preview-info'>\r\n                <p>{cartItem?.title.length > 20 ? cartItem?.title.slice(0, 20) + '...' : cartItem?.title}</p>\r\n                <p>{cartItem?.author}</p>\r\n                <p>{cartItem?.price} {cartItem?.currency}</p>\r\n            </div>\r\n            <div className='preview-delete'>\r\n                <FontAwesomeIcon icon={['fas', 'trash']} className='cart-item-delete' onClick={deleteItemHandler} />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import './CartPreview.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport BookPreview from '../components/BookPreview.js'\r\n\r\nexport default function CartPreview({ status, closeAll }) {\r\n\r\n    const cartItems = useSelector(state => state.cart)\r\n    const itemsId = Object.keys(cartItems)\r\n\r\n    return (\r\n        <div id=\"cart-preview\" className={status ? \"cart-preview-active\" : \"cart-preview-hidden\"}>\r\n            <h2>Cart Preview</h2>\r\n            <div className=\"book-preview-wrapper\">\r\n                {itemsId.map(itemId => (<BookPreview key={`${itemId}-preview`} itemId={itemId} />))}\r\n            </div>\r\n\r\n            <Link to=\"/cart\" className=\"btn checkout-btn\" onClick={closeAll}>\r\n                <span>Totals: ${Math.floor(itemsId.reduce((sum, itemId) => sum + cartItems[itemId].price, 0) * 100) / 100}</span>\r\n                <span>Checkout</span>\r\n            </Link>\r\n        </div>\r\n    )\r\n}","import './SideDrawer.css'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { logout } from '../redux/actions/authActions.js'\r\nimport BookPreview from '../components/BookPreview.js'\r\n\r\nexport default function SideDrawer({ closeAll, status, loginButton, registerButton, showCartPreview }) {\r\n    const dispatch = useDispatch();\r\n    const logoutHandler = () => {\r\n        dispatch(logout())\r\n        closeAll()\r\n    }\r\n\r\n    const { login: loginStatus, data } = useSelector(state => state.auth)\r\n    const cartItems = useSelector(state => state.cart)\r\n    const itemsId = Object.keys(cartItems)\r\n\r\n    return (\r\n        <div id=\"side-drawer\" className={status ? 'side-drawer-active' : 'side-drawer-hidden'}>\r\n\r\n            {loginStatus\r\n                ? <>\r\n                    <h2>\r\n                        <Link to='/user' onClick={closeAll}>\r\n                            {`Hi! ${data.user}`}\r\n                        </Link>\r\n                    </h2>\r\n                    <div onClick={logoutHandler}>Log Out</div>\r\n                </>\r\n                : <>\r\n                    <div onClick={loginButton}>Login</div>\r\n                    <div onClick={registerButton}>Register</div>\r\n                </>\r\n            }\r\n\r\n            <div id=\"side-drawer-cart-container\" onClick={showCartPreview}>\r\n                <FontAwesomeIcon icon={[\"fas\", \"shopping-cart\"]} />\r\n                <span>Cart</span>\r\n                <span id=\"side-drawer-cart-count\">{itemsId.length}</span>\r\n            </div>\r\n            <div id=\"side-drawer-cart-preview\">\r\n                {itemsId.map(itemId => (<BookPreview key={`${itemId}-book-preview`} itemId={itemId} />))}\r\n                <Link to=\"/cart\" className=\"btn checkout-btn\" onClick={closeAll}>\r\n                    <span>Totals: ${\r\n                        Math.floor(itemsId.reduce((sum, itemId) => sum + cartItems[itemId].price, 0) * 100) / 100\r\n                    }</span>\r\n                    <span>Checkout</span>\r\n                </Link>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}","import './CartItem.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { removeFromCart } from '../redux/actions/cartActions.js'\r\n\r\nexport default function CartItem({ itemId }) {\r\n\r\n    const dispatch = useDispatch();\r\n    const deleteItemHandler = () => dispatch(removeFromCart(itemId))\r\n    const cartItem = useSelector(state => state.cart)[itemId]\r\n\r\n    return (\r\n        <div className='cart-item'>\r\n            <div className='cart-item-img'>\r\n                <img\r\n                    src={cartItem.imageUrl}\r\n                    alt={cartItem.title}\r\n                ></img>\r\n            </div>\r\n            <Link to={`/book/${itemId}`} className='cart-item-name'>{cartItem.title}</Link>\r\n            <p className='cart-item-author'>{cartItem.author}</p>\r\n            <p className='cart-item-price'>{cartItem.price + ' ' + cartItem.currency}</p>\r\n            <FontAwesomeIcon icon={['fas', 'trash']} className='cart-item-delete' onClick={deleteItemHandler} />\r\n        </div>\r\n    )\r\n}","import './CartScreen.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport CartItem from '../components/CartItem.js'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { resetCart, checkout } from '../redux/actions/cartActions.js'\r\nimport { useEffect } from 'react'\r\n\r\n\r\n\r\nexport default function CartScreen() {\r\n\r\n    const cartItems = useSelector(state => state.cart)\r\n    const itemsId = Object.keys(cartItems)\r\n    const dispatch = useDispatch();\r\n    const checkoutUrl = useSelector(state => state.payment.destination)\r\n\r\n    const checkoutHandler = () => {\r\n        if (itemsId.length === 0) return alert(\"No item in your cart\")\r\n\r\n        dispatch(checkout())\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (checkoutUrl)\r\n            window.location.replace(checkoutUrl)\r\n\r\n    }, [checkoutUrl])\r\n\r\n    return (\r\n        <div className='cart-screen'>\r\n            <div className='cart-screen-left'>\r\n                <h2>Shopping Cart</h2>\r\n                {itemsId.length > 0\r\n                    ? itemsId.map((itemId => (<CartItem key={`${itemId}-cart-item`} itemId={itemId} />)))\r\n                    : <h3>No item in your cart</h3>\r\n                }\r\n            </div>\r\n            <div className='cart-screen-right'>\r\n                <div className='cart-screen-info'>\r\n                    <p>Subtotal ({itemsId.length}) items</p>\r\n                    <p>{\"$ \" + Math.floor(itemsId.reduce((sum, itemId) => sum + cartItems[itemId].price, 0) * 100) / 100}</p>\r\n                </div>\r\n                <div className=\"btn reset-cart-btn\" onClick={() => dispatch(resetCart())}>\r\n                    <FontAwesomeIcon icon={['fas', 'trash']} />\r\n                    Remove All from Cart\r\n                </div>\r\n                <div className=\"btn\" onClick={checkoutHandler}>Proceed to checkout</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","export const OPEN_LOGIN_MODAL = 'OPEN_LOGIN_MODAL';\r\nexport const CLOSE_LOGIN_MODAL = 'CLOSE_LOGIN_MODAL';\r\n\r\nexport const OPEN_REGISTER_MODAL = 'OPEN_REGISTER_MODAL';\r\nexport const CLOSE_REGISTER_MODAL = 'CLOSE_REGISTER_MODAL';\r\n","import * as actionTypes from '../constants/modalConstants.js'\r\n\r\nexport const openLoginModal = () => (dispatch) => {\r\n    dispatch({\r\n        type: actionTypes.OPEN_LOGIN_MODAL,\r\n    })\r\n}\r\n\r\nexport const closeLoginModal = () => (dispatch) => {\r\n    dispatch({\r\n        type: actionTypes.CLOSE_LOGIN_MODAL,\r\n    })\r\n}\r\n\r\nexport const openRegisterModal = () => (dispatch) => {\r\n    dispatch({\r\n        type: actionTypes.OPEN_REGISTER_MODAL,\r\n    })\r\n}\r\n\r\nexport const closeRegisterModal = () => (dispatch) => {\r\n    dispatch({\r\n        type: actionTypes.CLOSE_REGISTER_MODAL,\r\n    })\r\n}","import './Book.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n//redux actions\r\nimport { followBook, followBookCancel } from '../redux/actions/authActions.js'\r\nimport { openLoginModal } from '../redux/actions/modalActions.js'\r\nimport { addToCart, removeFromCart } from '../redux/actions/cartActions.js'\r\n\r\nexport default function Book({ item, purchased }) {\r\n    const cartItems = useSelector(state => state.cart)\r\n    const loginStatus = useSelector(state => state.auth.login)\r\n    const followedBooks = useSelector(state => state.auth.data?.followedBooks) || {}\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const followBookHandler = () => {\r\n        if (!loginStatus) return dispatch(openLoginModal())\r\n        document.getElementById(`${item._id}-btn`).classList.toggle('followed')\r\n        if (!followedBooks[item._id])\r\n            dispatch(followBook(item._id))\r\n        else\r\n            dispatch(followBookCancel(item._id))\r\n    }\r\n\r\n    const addToCartHandler = () => {\r\n        if (!loginStatus) return dispatch(openLoginModal())\r\n\r\n        if (loginStatus && purchased) return\r\n        document.getElementById(`${item._id}-cart`).classList.toggle('in-cart')\r\n        if (!cartItems[item._id])\r\n            dispatch(addToCart(item._id))\r\n        else\r\n            dispatch(removeFromCart(item._id))\r\n    }\r\n\r\n    return (\r\n        <div className='book'>\r\n            <img src={item.imageUrl} alt={item.name} />\r\n\r\n            <div className='book-info'>\r\n                <p className='info-name'>\r\n                    <span>{item.title}</span>\r\n                    <span className='author'>{item.author}</span>\r\n                    <span>\r\n                        <FontAwesomeIcon\r\n                            icon={['fas', 'heart']}\r\n                            id={`${item._id}-btn`}\r\n                            className={followedBooks[item._id] ? 'follow-icon followed' : 'follow-icon'}\r\n                            onClick={followBookHandler}\r\n                            title={followedBooks[item._id] ? 'Unfollow' : 'Follow'}\r\n                        />\r\n\r\n                        <FontAwesomeIcon\r\n                            icon={[\"fas\", \"shopping-cart\"]}\r\n                            id={`${item._id}-cart`}\r\n                            className={purchased ? 'cart-icon purchased' : cartItems[item._id] ? 'cart-icon in-cart' : 'cart-icon'}\r\n                            onClick={addToCartHandler}\r\n                            title={purchased ? 'Already purchased' : 'Add to cart'}\r\n                        />\r\n                    </span>\r\n                </p>\r\n                <p className='info-description'>{item.description.length > 100 ? item.description.slice(0, 100) + \"...\" : item.description}</p>\r\n                <p className='price'>Rent for 30 days: {item.price} {item.currency}</p>\r\n            </div>\r\n\r\n            <Link to={`/book/${item._id}`} className='info-button btn'>View Detail</Link>\r\n        </div>\r\n    )\r\n}","import './HomeScreen.css'\r\nimport Book from '../components/Book.js'\r\n\r\nimport { useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport { getBooks as listBooks } from '../redux/actions/bookActions.js'\r\n\r\nexport default function HomeScreen() {\r\n    const purchasedBooks = useSelector(state => state.auth?.data?.purchasedBooks) || {}\r\n\r\n    const dispatch = useDispatch();\r\n    const { books, loading, error } = useSelector(state => state.getBooks)\r\n\r\n    useEffect(() => {\r\n        // prevent fetch data from backend again\r\n        if (books?.length > 0) return\r\n        dispatch(listBooks())\r\n    }, [])\r\n\r\n    return (\r\n        <div className='home-screen'>\r\n            <h2 className='screen-title'>Home</h2>\r\n            <div id=\"all-books\">\r\n                {loading\r\n                    ? <h2>Loading...</h2>\r\n                    : error\r\n                        ? <h2>{error}</h2>\r\n                        : books.map(book => (\r\n                            <Book key={book._id} item={book} purchased={purchasedBooks[book._id] > Date.now() || false} />\r\n                        ))\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}","import * as actionTypes from '../constants/bookConstants.js'\r\nimport axios from 'axios'\r\n\r\nexport const getBooks = () => async (dispatch, getState) => {\r\n    try {\r\n        dispatch({\r\n            type: actionTypes.GET_BOOKS_REQUEST\r\n        })\r\n\r\n        const { data } = await axios.get('/api/books')\r\n        dispatch({\r\n            type: actionTypes.GET_BOOKS_SUCCESS,\r\n            payload: data\r\n        })\r\n\r\n        const now = new Date()\r\n        localStorage.setItem('books', JSON.stringify({\r\n            value: getState().getBooks.books,\r\n            expire: now.getTime() + 60 * 10 * 1000\r\n        }))\r\n\r\n    } catch (err) {\r\n        dispatch({\r\n            type: actionTypes.GET_BOOKS_FAILURE,\r\n            payload: err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message\r\n        })\r\n    }\r\n}\r\n\r\nexport const getBookDetails = (id) => async (dispatch, getState) => {\r\n    try {\r\n        dispatch({\r\n            type: actionTypes.GET_BOOK_DETAILS_REQUEST\r\n        })\r\n\r\n        const { data } = await axios.get(`/api/books/${id}`)\r\n        dispatch({\r\n            type: actionTypes.GET_BOOK_DETAILS_SUCCESS,\r\n            payload: data\r\n        })\r\n        localStorage.setItem('book', JSON.stringify(getState().getBookDetails.book))\r\n    } catch (err) {\r\n        dispatch({\r\n            type: actionTypes.GET_BOOK_DETAILS_FAILURE,\r\n            payload: err.response && err.response.data.message\r\n                ? err.response.data.message\r\n                : err.message\r\n        })\r\n    }\r\n}\r\n\r\nexport const removeBookDetails = () => (dispatch) => {\r\n    dispatch({\r\n        type: actionTypes.GET_BOOK_DETAILS_RESET\r\n    })\r\n}\r\n\r\n\r\n","import './BookScreen.css'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\n//redux actions\r\nimport { followBook, followBookCancel } from '../redux/actions/authActions.js'\r\nimport { addToCart, removeFromCart } from '../redux/actions/cartActions.js'\r\nimport { openLoginModal } from '../redux/actions/modalActions.js'\r\n\r\nexport default function BookScreen({ match }) {\r\n\r\n    const loginStatus = useSelector(state => state.auth.login)\r\n    const followedBooks = useSelector(state => state.auth.data?.followedBooks) || {}\r\n    const booksInCart = useSelector(state => state.cart)\r\n    const purchasedBooks = useSelector(state => state.auth.data?.purchasedBooks) || {}\r\n\r\n    const dispatch = useDispatch();\r\n    const book = useSelector(state => state.getBooks.books).filter(book => book._id === match.params.id)[0]\r\n    const purchased = purchasedBooks[book._id] > Date.now() || false\r\n\r\n    const addToCartHandler = () => {\r\n        if (!loginStatus) return dispatch(openLoginModal())\r\n\r\n        document.querySelector(\".add-cart-btn\").classList.toggle('in-cart-btn')\r\n        if (!booksInCart[book._id])\r\n            dispatch(addToCart(book._id))\r\n        else\r\n            dispatch(removeFromCart(book._id))\r\n    }\r\n\r\n    const followBookHandler = () => {\r\n        if (!loginStatus) return dispatch(openLoginModal())\r\n\r\n        document.querySelector(\".follow-btn\").classList.toggle('followed-btn')\r\n        if (!followedBooks[book._id])\r\n            dispatch(followBook(book._id))\r\n        else\r\n            dispatch(followBookCancel(book._id))\r\n    }\r\n\r\n    return (\r\n        <div className='book-screen'>\r\n            <div className='book-screen-left'>\r\n                <div className='left-img'>\r\n                    <img src={book.imageUrl} alt={book.title}></img>\r\n                </div>\r\n                <div className=\"left-info\">\r\n                    <p className='left-name'>{book.title}</p>\r\n                    <p className='left-author'>{book.author}</p>\r\n                    <p className='left-price'>Rent for 30 days: {book.price} {book.currency}</p>\r\n                    <p className='left-description'>{book.description}</p>\r\n                </div>\r\n            </div>\r\n            <div className='book-screen-right'>\r\n                <div className='right-buttons'>\r\n                    {purchased\r\n                        ? <div className='btn add-cart-btn purchased-btn'>Purchased</div>\r\n\r\n                        : booksInCart[book._id]\r\n                            ? <div className='btn add-cart-btn in-cart-btn' onClick={addToCartHandler} >In cart</div>\r\n                            : <div className='btn add-cart-btn' onClick={addToCartHandler} >Add to Cart</div>\r\n                    }\r\n                    {followedBooks[book._id]\r\n                        ? <div className='btn follow-btn followed-btn' onClick={followBookHandler} >Unfollow</div>\r\n                        : <div className='btn follow-btn' onClick={followBookHandler} >Follow</div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import './SuccessScreen.css'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { resetCart } from '../redux/actions/cartActions.js'\r\nimport axios from 'axios'\r\nimport { updatePurchasedBooks } from '../redux/actions/authActions.js'\r\n\r\n\r\n\r\nexport default function SuccessScreen({ history }) {\r\n    const [timeLeft, setTimer] = useState(5)\r\n    const dispatch = useDispatch();\r\n    const userId = useSelector(state => state.auth.data?.id)\r\n    const purchasedBooks = Object.keys(useSelector(state => state.cart))\r\n\r\n    useEffect(() => {\r\n        if (userId)\r\n            axios.put(`/api/user/${userId}/purchasedBooks`, { purchasedBooks })\r\n                .then(() => dispatch(updatePurchasedBooks()))\r\n        dispatch(resetCart())\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        // history.push rather than window.location.replace to prevent new http request\r\n        setTimeout(() => history.push('/'), 5000)\r\n    })\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => setTimer(prev => prev - 1), 1000)\r\n        return () => {\r\n            clearTimeout(timer)\r\n        }\r\n    })\r\n\r\n\r\n    return (\r\n        <div className='success-screen'>\r\n            <h2>Payment Success</h2>\r\n            <p>{`${timeLeft} secs redirects to shop`}</p>\r\n            <Link id='back-to-shop' to={'/'} > Back to shop </Link>\r\n        </div>\r\n    )\r\n}","import './Purchased.css'\r\nimport axios from 'axios'\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport default function Purchased({ itemId }) {\r\n\r\n    const { id: userId } = useSelector(state => state.auth.data)\r\n    const bookInfo = useSelector(state => state.getBooks.books).filter(book => book._id === itemId)[0]\r\n    const expires = useSelector(state => state.auth.data.purchasedBooks)[itemId] - Date.now()\r\n\r\n    const readerHandler = async () => {\r\n        const { data } = await axios.get(`/api/books/viewer/${itemId}?userId=${userId}`)\r\n        const { success, error } = data\r\n        success ? alert(success) : alert(error)\r\n    }\r\n\r\n    return (\r\n        <div className='purchased-view'>\r\n            <img src={bookInfo.imageUrl} alt={bookInfo.title} />\r\n            <div className='purchased-book-info'>\r\n                <span>{bookInfo.title}</span>\r\n                <span>{bookInfo.author}</span>\r\n                {\r\n                    expires > 24 * 3600 * 1000\r\n                        ? <p className='expires'>{`Expires in ${Math.floor(expires / 1000 / 3600 / 24)} days`}</p>\r\n                        : <p className='expires-urgent'>{`Expires in ${Math.floor(expires / 1000 / 3600)} hours`}</p>\r\n                }\r\n            </div>\r\n            <div className='btn read-btn' onClick={readerHandler}>Read</div>\r\n        </div>\r\n    )\r\n}","import './PurchaseScreen.css'\r\nimport { useSelector } from 'react-redux'\r\nimport Purchased from '../components/Purchased'\r\n\r\n\r\nexport default function PurchaseScreen() {\r\n    const { user, purchasedBooks = {} } = useSelector(state => state.auth.data)\r\n    const purchasedBooksId = Object.keys(purchasedBooks)\r\n    return (\r\n        <div className='purchase-screen'>\r\n            <h2>Hi {user}, here is your available books, enjoy!</h2>\r\n            <div className='purchase-screen-container'>\r\n                {purchasedBooksId.map(bookId => {\r\n                    return (\r\n                        <Purchased\r\n                            key={bookId + '-view'}\r\n                            itemId={bookId}\r\n                        />\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Redirect, Route } from 'react-router'\r\n\r\nexport default function PrivateRoute({ component: Component, loginStatus, ...rest }) {\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={props => loginStatus\r\n                ? (<Component {...props} />)\r\n\r\n                : (<Redirect to='/' />)\r\n            }\r\n        />\r\n    )\r\n}","import './App.css';\r\nimport { useState } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\n\r\nimport Navbar from './components/Navbar.js'\r\nimport Modal from './components/Modal.js'\r\nimport CartPreview from './components/CartPreview.js'\r\nimport SideDrawer from './components/SideDrawer.js'\r\n\r\nimport CartScreen from './screens/CartScreen.js'\r\nimport HomeScreen from './screens/HomeScreen.js'\r\nimport BooksScreen from './screens/BookScreen.js'\r\nimport SuccessScreen from './screens/SuccessScreen.js';\r\nimport PurchaseScreen from './screens/PurchaseScreen.js'\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\nimport PrivateRoute from './components/PrivateRoute.js'\r\n\r\nimport { openLoginModal, closeLoginModal, openRegisterModal, closeRegisterModal } from './redux/actions/modalActions.js'\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const { login: isLoginModalShown, register: isRegisterModalShown } = useSelector(state => state.modal)\r\n  const loginStatus = useSelector(state => state.auth.login)\r\n  const [isCartPreviewShown, setCartPreview] = useState(false)\r\n  const [isSideDrawerShown, setSideDrawer] = useState(false)\r\n\r\n  const handleFormSwitch = () => {\r\n    if (isLoginModalShown)\r\n      dispatch(openRegisterModal())\r\n    else\r\n      dispatch(openLoginModal())\r\n  }\r\n\r\n  const loginButtonPressed = () => {\r\n    dispatch(openLoginModal())\r\n    setSideDrawer(false)\r\n  }\r\n\r\n  const registerButtonPressed = () => {\r\n    dispatch(openRegisterModal())\r\n    setSideDrawer(false)\r\n  }\r\n\r\n  const closeAll = () => {\r\n    if (isLoginModalShown) dispatch(closeLoginModal())\r\n    if (isRegisterModalShown) dispatch(closeRegisterModal())\r\n    setCartPreview(false)\r\n    setSideDrawer(false)\r\n  }\r\n\r\n  const showCartPreview = () => setCartPreview(true)\r\n\r\n  const showSideDrawer = () => setSideDrawer(true)\r\n\r\n  return (\r\n    <Router >\r\n\r\n      <div className=\"app\">\r\n        {/* for website */}\r\n        <Navbar\r\n          loginButton={loginButtonPressed}\r\n          registerButton={registerButtonPressed}\r\n          showCartPreview={showCartPreview}\r\n          showSideDrawer={showSideDrawer}\r\n        />\r\n        <SideDrawer\r\n          status={isSideDrawerShown}\r\n          loginButton={loginButtonPressed}\r\n          registerButton={registerButtonPressed}\r\n          showCartPreview={showCartPreview}\r\n          closeAll={closeAll}\r\n        />\r\n        <Modal\r\n          name=\"Register\"\r\n          message=\"Already has an account?\"\r\n          link=\"login\"\r\n          handleFormSwitch={handleFormSwitch}\r\n          status={isRegisterModalShown}\r\n          closeAll={closeAll}\r\n        />\r\n        <Modal\r\n          name=\"Login\"\r\n          message=\"Do not have an account?\"\r\n          link=\"register\"\r\n          handleFormSwitch={handleFormSwitch}\r\n          status={isLoginModalShown}\r\n          closeAll={closeAll}\r\n        />\r\n        <main>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={HomeScreen} />\r\n            <Route exact path=\"/book/:id\" component={BooksScreen} />\r\n            <Route exact path=\"/cart\" component={CartScreen} />\r\n            <PrivateRoute exact path=\"/success\" loginStatus={loginStatus} component={SuccessScreen} />\r\n            <PrivateRoute exact path=\"/user\" loginStatus={loginStatus} component={PurchaseScreen} />\r\n          </Switch>\r\n\r\n        </main>\r\n        <CartPreview\r\n          status={isCartPreviewShown}\r\n          closeAll={closeAll}\r\n        />\r\n        <div\r\n          id=\"overlay\"\r\n          className={\r\n            isLoginModalShown\r\n              || isRegisterModalShown\r\n              || isCartPreviewShown\r\n              || isSideDrawerShown\r\n              ? \"active\" : \"\"}\r\n          onClick={closeAll}\r\n        ></div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { createStore, combineReducers, applyMiddleware } from \"redux\"\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from \"redux-devtools-extension\"\r\n\r\n// reducers\r\nimport { cartReducer, checkoutReducer } from './reducers/cartReducers.js'\r\nimport { getBooksReducer, getBookDetailsReducer } from './reducers/bookReducers.js'\r\nimport { authReducer } from './reducers/authReducers.js'\r\nimport { modalReducer } from './reducers/modalReducers.js'\r\n\r\nconst reducer = combineReducers({\r\n    cart: cartReducer,\r\n    payment: checkoutReducer,\r\n    getBooks: getBooksReducer,\r\n    getBookDetails: getBookDetailsReducer,\r\n    auth: authReducer,\r\n    modal: modalReducer,\r\n})\r\n\r\nconst middleware = [thunk]\r\n\r\nconst now = new Date()\r\nconst cartFromLocalStorage = localStorage.getItem('cart') ? JSON.parse(localStorage.getItem('cart')) : {}\r\nconst bookFromLocalStorage = localStorage.getItem('books')\r\n    && JSON.parse(localStorage.getItem('books')).expire > now.getTime()\r\n    ? JSON.parse(localStorage.getItem('books')).value\r\n    : []\r\n\r\nconst currentBookFromLocalStorage = localStorage.getItem('book') ? JSON.parse(localStorage.getItem('book')) : {}\r\nconst authFromLocalStorage = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : {}\r\n\r\nconst INITIAL_STATE = {\r\n    cart: cartFromLocalStorage,\r\n    getBooks: {\r\n        books: bookFromLocalStorage,\r\n    },\r\n    getBookDetails: {\r\n        book: currentBookFromLocalStorage,\r\n    },\r\n    payment: { destination: null },\r\n    auth: authFromLocalStorage\r\n}\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    INITIAL_STATE,\r\n    composeWithDevTools(applyMiddleware(...middleware))\r\n)\r\n\r\nexport default store","import * as actionTypes from '../constants/cartConstants.js'\r\n\r\nexport const cartReducer = (state = {}, action) => {\r\n    const item = action.payload;\r\n    switch (action.type) {\r\n        case actionTypes.ADD_TO_CART:\r\n            if (state[item.id])\r\n                return state\r\n            else\r\n                return { ...state, ...item }\r\n\r\n        case actionTypes.REMOVE_FROM_CART:\r\n            const { [action.payload]: removedItem, ...rest } = state\r\n            return rest\r\n\r\n        case actionTypes.CART_RESET:\r\n            return {}\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const checkoutReducer = (state = {}, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.CHECKOUT_SUCCESS:\r\n            return {\r\n                destination: action.destination\r\n            }\r\n        case actionTypes.CHECKOUT_FAILURE:\r\n            return {\r\n                error: action.error\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","import * as actionTypes from '../constants/bookConstants.js'\r\n\r\nexport const getBooksReducer = (state = { books: [] }, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.GET_BOOKS_REQUEST:\r\n            return {\r\n                loading: true,\r\n                books: []\r\n            }\r\n\r\n        case actionTypes.GET_BOOKS_SUCCESS:\r\n            return {\r\n                loading: false,\r\n                books: action.payload\r\n            }\r\n\r\n        case actionTypes.GET_BOOKS_FAILURE:\r\n            return {\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const getBookDetailsReducer = (state = { book: {} }, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.GET_BOOK_DETAILS_REQUEST:\r\n            return {\r\n                loading: true,\r\n            }\r\n        case actionTypes.GET_BOOK_DETAILS_SUCCESS:\r\n            return {\r\n                loading: false,\r\n                book: action.payload\r\n            }\r\n        case actionTypes.GET_BOOK_DETAILS_FAILURE:\r\n            return {\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        case actionTypes.GET_BOOK_DETAILS_RESET:\r\n            return {\r\n                book: {}\r\n            }\r\n        default:\r\n            return state\r\n\r\n    }\r\n}\r\n","import * as actionTypes from '../constants/authConstants.js'\r\n\r\nexport const authReducer = (state = { login: false }, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.LOGIN_SUCCESS:\r\n        case actionTypes.REGISTER_SUCCESS:\r\n\r\n            return {\r\n                data: {\r\n                    ...state.data,\r\n                    ...action.payload\r\n                },\r\n                login: true\r\n            }\r\n        case actionTypes.LOGOUT_SUCCESS:\r\n            return {\r\n                data: action.payload,\r\n                login: false\r\n            }\r\n\r\n\r\n        case actionTypes.LOGIN_FAILURE:\r\n        case actionTypes.REGISTER_FAILURE:\r\n            return {\r\n                error: action.payload\r\n            }\r\n\r\n        case actionTypes.UPDATE_PURCHASED_BOOKS:\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    purchasedBooks: action.payload\r\n                }\r\n            }\r\n        case actionTypes.FOLLOW_BOOK:\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    followedBooks: {\r\n                        ...state.data.followedBooks,\r\n                        [action.payload]: true\r\n                    }\r\n                }\r\n            }\r\n        case actionTypes.FOLLOW_BOOK_CANCEL:\r\n            const { [action.payload]: unfollowedBook, ...rest } = state.data.followedBooks\r\n            return {\r\n                ...state,\r\n                data: {\r\n                    ...state.data,\r\n                    followedBooks: rest\r\n                }\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n","import * as actionTypes from '../constants/modalConstants.js'\r\n\r\nexport const modalReducer = (state = { login: false, register: false }, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.OPEN_LOGIN_MODAL:\r\n            return {\r\n                login: true,\r\n                register: false\r\n            }\r\n        case actionTypes.CLOSE_LOGIN_MODAL:\r\n            return {\r\n                ...state,\r\n                login: false\r\n            }\r\n        case actionTypes.OPEN_REGISTER_MODAL:\r\n            return {\r\n                register: true,\r\n                login: false\r\n            }\r\n        case actionTypes.CLOSE_REGISTER_MODAL:\r\n            return {\r\n                ...state,\r\n                register: false\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\n// redux\r\nimport { Provider } from 'react-redux'\r\nimport store from './redux/store.js';\r\n\r\n// fontawesome\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\n\r\n// other icons will be used \r\nimport { faShoppingCart, faEye, faEyeSlash, faHeart, faTrash } from '@fortawesome/free-solid-svg-icons'\r\n\r\nlibrary.add(faShoppingCart, faEye, faEyeSlash, faHeart, faTrash)\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store} >\r\n    <React.StrictMode>\r\n      <App />\r\n    </React.StrictMode>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}