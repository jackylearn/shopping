(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{47:function(e,t,c){},53:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(25),s=c.n(r),o=c(17),i=(c(47),c(2)),l=c(10),u=(c(53),c(7)),d=c.n(u),j=c(4),b=c(13),O="LOGIN_SUCCESS",h="LOGIN_FAILURE",p="REGISTER_SUCCESS",f="REGISTER_FAILURE",m="LOGOUT_SUCCESS",v="UPDATE_PURCHASED_BOOKS",g="FOLLOW_BOOK",x="FOLLOW_BOOK_CANCEL",k=c(8),y=c.n(k),w=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t,c){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/auth/logout");case 2:n=e.sent,a=n.data,t({type:m,payload:a}),localStorage.setItem("user",JSON.stringify(c().auth)),localStorage.removeItem("cart"),localStorage.removeItem("follow");case 8:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()},S=function(e){return function(t,c){t({type:g,payload:e}),localStorage.setItem("user",JSON.stringify(c().auth));var n=c().auth.data.id;y.a.put("/api/user/".concat(n,"/followedBooks"),{followedBooks:[e,!0]})}},N=function(e){return function(t,c){t({type:x,payload:e}),localStorage.setItem("user",JSON.stringify(c().auth));var n=c().auth.data.id;y.a.put("/api/user/".concat(n,"/followedBooks"),{followedBooks:[e,!1]})}},C="GET_BOOKS_REQUEST",_="GET_BOOKS_SUCCESS",E="GET_BOOKS_FAILURE",B="GET_BOOK_DETAILS_REQUEST",I="GET_BOOK_DETAILS_SUCCESS",T="GET_BOOK_DETAILS_FAILURE",L="GET_BOOK_DETAILS_RESET",R=c(19),A="ADD_TO_CART",U="REMOVE_FROM_CART",D="CART_RESET",F="CHECKOUT_SUCCESS",G="CHECKOUT_FAILURE",J=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(c,n){var a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("/api/books/".concat(e));case 2:a=t.sent,r=a.data,c({type:A,payload:Object(R.a)({},r._id,{title:r.title,author:r.author,description:r.description,imageUrl:r.imageUrl,price:r.price,currency:r.currency})}),localStorage.setItem("cart",JSON.stringify(n().cart));case 6:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}()},P=function(e){return function(t,c){t({type:U,payload:e}),localStorage.setItem("cart",JSON.stringify(c().cart))}},K=function(){return function(e,t){e({type:D}),localStorage.setItem("cart",JSON.stringify(t().cart))}},M=c(9),q=c(0);function H(e){var t=e.loginButton,c=e.registerButton,n=e.showCartPreview,a=e.showSideDrawer,r=Object(i.c)((function(e){return e.auth})),s=r.login,o=r.data,u=Object.keys(Object(i.c)((function(e){return e.cart}))),d=Object(i.b)();return Object(q.jsxs)("nav",{id:"navbar",children:[Object(q.jsx)(M.b,{to:"/",id:"logo",children:"BookRental"}),Object(q.jsxs)("div",{id:"nav-links",children:[s?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("span",{children:Object(q.jsxs)(M.b,{to:"/user",id:"user",children:[Object(q.jsx)("span",{children:o.message}),Object(q.jsx)("span",{children:o.user||""})]})}),Object(q.jsx)("span",{onClick:function(){d(w()),d(K())},children:"Log Out"})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("span",{onClick:t,children:"Login"}),Object(q.jsx)("span",{onClick:c,children:"Register"})]}),Object(q.jsxs)("div",{id:"cart-container",onClick:n,children:[Object(q.jsx)(l.a,{icon:["fas","shopping-cart"]}),Object(q.jsx)("span",{children:"Cart"}),Object(q.jsx)("span",{id:"cart-count",children:u.length})]})]}),Object(q.jsxs)("div",{id:"menu",onClick:a,children:[Object(q.jsx)("div",{}),Object(q.jsx)("div",{}),Object(q.jsx)("div",{})]})]})}c(74);function Q(e){var t=e.name,c=e.closeAll,a=e.status,r=e.handleFormSwitch,s=e.message,u=e.link,m=Object(n.useState)(!1),v=Object(o.a)(m,2),g=v[0],x=v[1],k=Object(n.useState)(""),w=Object(o.a)(k,2),S=w[0],N=w[1],C=Object(n.useState)(""),_=Object(o.a)(C,2),E=_[0],B=_[1],I=Object(i.c)((function(e){return e.auth})),T=I.login,L=I.error,R=Object(i.c)((function(e){return e.modal})),A=R.login,U=R.register,D=Object(i.b)();return Object(n.useEffect)((function(){if(document)return T?c():(A?document.querySelector("#login .auth-message").innerText=L||"":U&&(document.querySelector("#register .auth-message").innerText=L||""),function(){document.querySelector("#login .auth-message").innerText="",document.querySelector("#register .auth-message").innerText=""})}),[T]),Object(q.jsxs)("div",{id:t.toLowerCase(),className:a?"modal active":"modal",children:[Object(q.jsx)("h2",{className:"modal-title",children:t}),Object(q.jsx)("p",{className:"auth-message"}),Object(q.jsxs)("div",{className:"form",children:[Object(q.jsxs)("div",{className:"form-content",children:[Object(q.jsx)("label",{htmlFor:"name",children:"Username"}),Object(q.jsx)("input",{type:"text",name:"name",autoComplete:"off",placeholder:"username",onChange:function(e){return N(e.target.value)},value:S,required:!0})]}),Object(q.jsxs)("div",{className:"form-content",children:[Object(q.jsx)("label",{htmlFor:"password",children:"Password"}),Object(q.jsx)("input",{type:g?"text":"password",name:"password",placeholder:"password",onChange:function(e){return B(e.target.value)},value:E,required:!0}),Object(q.jsx)("div",{className:"visibility",children:Object(q.jsx)(l.a,{icon:g?["fas","eye-slash"]:["fas","eye"],onClick:function(){return x((function(e){return!e}))}})})]}),Object(q.jsx)("div",{className:"btn modal-btn",onClick:function(){D("Login"===t?function(e,t){return function(){var c=Object(b.a)(d.a.mark((function c(n,a){var r,s,o,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,y.a.post("/auth/login",{name:e,password:t});case 3:return r=c.sent,s=r.data,c.next=7,y.a.get("/api/user/".concat(s.id));case 7:o=c.sent,i=o.data,n({type:O,payload:Object(j.a)(Object(j.a)({},s),{},{purchasedBooks:i.purchased,followedBooks:i.follow})}),localStorage.setItem("user",JSON.stringify(a().auth)),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),n({type:h,payload:"Invalid username or password"});case 16:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e,t){return c.apply(this,arguments)}}()}(S,E):function(e,t){return function(){var c=Object(b.a)(d.a.mark((function c(n,a){var r,s;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,y.a.post("/auth/register",{name:e,password:t});case 3:if(r=c.sent,!(s=r.data).error){c.next=7;break}throw new Error(s.error);case 7:n({type:p,payload:s}),localStorage.setItem("user",JSON.stringify(a().auth)),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),n({type:f,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 14:case"end":return c.stop()}}),c,null,[[0,11]])})));return function(e,t){return c.apply(this,arguments)}}()}(S,E)),N(""),B("")},children:t})]}),Object(q.jsxs)("p",{children:[s,"  ",Object(q.jsx)("span",{className:"modal-switch",onClick:r,children:u})]})]})}c(75),c(76);function W(e){var t=e.itemId,c=Object(i.b)(),n=Object(i.c)((function(e){return e.cart}))[t];return Object(q.jsxs)("div",{className:"book-preview",children:[Object(q.jsx)("div",{className:"preview-img",children:Object(q.jsx)("img",{src:null===n||void 0===n?void 0:n.imageUrl,alt:null===n||void 0===n?void 0:n.title})}),Object(q.jsxs)("div",{className:"preview-info",children:[Object(q.jsx)("p",{children:(null===n||void 0===n?void 0:n.title.length)>20?(null===n||void 0===n?void 0:n.title.slice(0,20))+"...":null===n||void 0===n?void 0:n.title}),Object(q.jsx)("p",{children:null===n||void 0===n?void 0:n.author}),Object(q.jsxs)("p",{children:[null===n||void 0===n?void 0:n.price," ",null===n||void 0===n?void 0:n.currency]})]}),Object(q.jsx)("div",{className:"preview-delete",children:Object(q.jsx)(l.a,{icon:["fas","trash"],className:"cart-item-delete",onClick:function(){return c(P(t))}})})]})}function $(e){var t=e.status,c=e.closeAll,n=Object(i.c)((function(e){return e.cart})),a=Object.keys(n);return Object(q.jsxs)("div",{id:"cart-preview",className:t?"cart-preview-active":"cart-preview-hidden",children:[Object(q.jsx)("h2",{children:"Cart Preview"}),Object(q.jsx)("div",{className:"book-preview-wrapper",children:a.map((function(e){return Object(q.jsx)(W,{itemId:e},"".concat(e,"-preview"))}))}),Object(q.jsxs)(M.b,{to:"/cart",className:"btn checkout-btn",onClick:c,children:[Object(q.jsxs)("span",{children:["Totals: $",Math.floor(100*a.reduce((function(e,t){return e+n[t].price}),0))/100]}),Object(q.jsx)("span",{children:"Checkout"})]})]})}c(77);function V(e){var t=e.closeAll,c=e.status,n=e.loginButton,a=e.registerButton,r=e.showCartPreview,s=Object(i.b)(),o=Object(i.c)((function(e){return e.auth})),u=o.login,d=o.data,j=Object(i.c)((function(e){return e.cart})),b=Object.keys(j);return Object(q.jsxs)("div",{id:"side-drawer",className:c?"side-drawer-active":"side-drawer-hidden",children:[u?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h2",{children:Object(q.jsx)(M.b,{to:"/user",onClick:t,children:"Hi! ".concat(d.user)})}),Object(q.jsx)("div",{onClick:function(){s(w()),t()},children:"Log Out"})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{onClick:n,children:"Login"}),Object(q.jsx)("div",{onClick:a,children:"Register"})]}),Object(q.jsxs)("div",{id:"side-drawer-cart-container",onClick:r,children:[Object(q.jsx)(l.a,{icon:["fas","shopping-cart"]}),Object(q.jsx)("span",{children:"Cart"}),Object(q.jsx)("span",{id:"side-drawer-cart-count",children:b.length})]}),Object(q.jsxs)("div",{id:"side-drawer-cart-preview",children:[b.map((function(e){return Object(q.jsx)(W,{itemId:e},"".concat(e,"-book-preview"))})),Object(q.jsxs)(M.b,{to:"/cart",className:"btn checkout-btn",onClick:t,children:[Object(q.jsxs)("span",{children:["Totals: $",Math.floor(100*b.reduce((function(e,t){return e+j[t].price}),0))/100]}),Object(q.jsx)("span",{children:"Checkout"})]})]})]})}c(78),c(79);function z(e){var t=e.itemId,c=Object(i.b)(),n=Object(i.c)((function(e){return e.cart}))[t];return Object(q.jsxs)("div",{className:"cart-item",children:[Object(q.jsx)("div",{className:"cart-item-img",children:Object(q.jsx)("img",{src:n.imageUrl,alt:n.title})}),Object(q.jsx)(M.b,{to:"/book/".concat(t),className:"cart-item-name",children:n.title}),Object(q.jsx)("p",{className:"cart-item-author",children:n.author}),Object(q.jsx)("p",{className:"cart-item-price",children:n.price+" "+n.currency}),Object(q.jsx)(l.a,{icon:["fas","trash"],className:"cart-item-delete",onClick:function(){return c(P(t))}})]})}function X(){var e=Object(i.c)((function(e){return e.cart})),t=Object.keys(e),c=Object(i.b)(),a=Object(i.c)((function(e){return e.payment.destination}));return Object(n.useEffect)((function(){a&&window.location.replace(a)}),[a]),Object(q.jsxs)("div",{className:"cart-screen",children:[Object(q.jsxs)("div",{className:"cart-screen-left",children:[Object(q.jsx)("h2",{children:"Shopping Cart"}),t.length>0?t.map((function(e){return Object(q.jsx)(z,{itemId:e},"".concat(e,"-cart-item"))})):Object(q.jsx)("h3",{children:"No item in your cart"})]}),Object(q.jsxs)("div",{className:"cart-screen-right",children:[Object(q.jsxs)("div",{className:"cart-screen-info",children:[Object(q.jsxs)("p",{children:["Subtotal (",t.length,") items"]}),Object(q.jsx)("p",{children:"$ "+Math.floor(100*t.reduce((function(t,c){return t+e[c].price}),0))/100})]}),Object(q.jsxs)("div",{className:"btn reset-cart-btn",onClick:function(){return c(K())},children:[Object(q.jsx)(l.a,{icon:["fas","trash"]}),"Remove All from Cart"]}),Object(q.jsx)("div",{className:"btn",onClick:function(){if(0===t.length)return alert("No item in your cart");c(function(){var e=Object(b.a)(d.a.mark((function e(t,c){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"CHECKOUT_REQUEST"}),e.next=4,y.a.post("/payment/checkout",{items:Object.keys(c().cart)});case 4:n=e.sent,a=n.data,t({type:F,destination:a.paymentUrl}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:G,error:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,c){return e.apply(this,arguments)}}())},children:"Proceed to checkout"})]})]})}c(80),c(81);var Y="OPEN_LOGIN_MODAL",Z="CLOSE_LOGIN_MODAL",ee="OPEN_REGISTER_MODAL",te="CLOSE_REGISTER_MODAL",ce=function(){return function(e){e({type:Y})}},ne=function(){return function(e){e({type:ee})}};function ae(e){var t=e.item,c=e.purchased,n=Object(i.c)((function(e){return e.cart})),a=Object(i.c)((function(e){return e.auth.login})),r=Object(i.c)((function(e){var t;return null===(t=e.auth.data)||void 0===t?void 0:t.followedBooks}))||{},s=Object(i.b)();return Object(q.jsxs)("div",{className:"book",children:[Object(q.jsx)("img",{src:t.imageUrl,alt:t.name}),Object(q.jsxs)("div",{className:"book-info",children:[Object(q.jsxs)("p",{className:"info-name",children:[Object(q.jsx)("span",{children:t.title}),Object(q.jsx)("span",{className:"author",children:t.author}),Object(q.jsxs)("span",{children:[Object(q.jsx)(l.a,{icon:["fas","heart"],id:"".concat(t._id,"-btn"),className:r[t._id]?"follow-icon followed":"follow-icon",onClick:function(){if(!a)return s(ce());document.getElementById("".concat(t._id,"-btn")).classList.toggle("followed"),r[t._id]?s(N(t._id)):s(S(t._id))},title:r[t._id]?"Unfollow":"Follow"}),Object(q.jsx)(l.a,{icon:["fas","shopping-cart"],id:"".concat(t._id,"-cart"),className:c?"cart-icon purchased":n[t._id]?"cart-icon in-cart":"cart-icon",onClick:function(){if(!a)return s(ce());a&&c||(document.getElementById("".concat(t._id,"-cart")).classList.toggle("in-cart"),n[t._id]?s(P(t._id)):s(J(t._id)))},title:c?"Already purchased":"Add to cart"})]})]}),Object(q.jsx)("p",{className:"info-description",children:t.description.length>100?t.description.slice(0,100)+"...":t.description}),Object(q.jsxs)("p",{className:"price",children:["Rent for 30 days: ",t.price," ",t.currency]})]}),Object(q.jsx)(M.b,{to:"/book/".concat(t._id),className:"info-button btn",children:"View Detail"})]})}function re(){var e=Object(i.c)((function(e){var t,c;return null===(t=e.auth)||void 0===t||null===(c=t.data)||void 0===c?void 0:c.purchasedBooks}))||{},t=Object(i.b)(),c=Object(i.c)((function(e){return e.getBooks})),a=c.books,r=c.loading,s=c.error;return Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a.length)>0||t(function(){var e=Object(b.a)(d.a.mark((function e(t,c){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:C}),e.next=4,y.a.get("/api/books");case 4:n=e.sent,a=n.data,t({type:_,payload:a}),r=new Date,localStorage.setItem("books",JSON.stringify({value:c().getBooks.books,expire:r.getTime()+6e5})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:E,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,c){return e.apply(this,arguments)}}())}),[]),Object(q.jsxs)("div",{className:"home-screen",children:[Object(q.jsx)("h2",{className:"screen-title",children:"Home"}),Object(q.jsx)("div",{id:"all-books",children:r?Object(q.jsx)("h2",{children:"Loading..."}):s?Object(q.jsx)("h2",{children:s}):a.map((function(t){return Object(q.jsx)(ae,{item:t,purchased:e[t._id]>Date.now()||!1},t._id)}))})]})}c(82);function se(e){var t=e.match,c=Object(i.c)((function(e){return e.auth.login})),n=Object(i.c)((function(e){var t;return null===(t=e.auth.data)||void 0===t?void 0:t.followedBooks}))||{},a=Object(i.c)((function(e){return e.cart})),r=Object(i.c)((function(e){var t;return null===(t=e.auth.data)||void 0===t?void 0:t.purchasedBooks}))||{},s=Object(i.b)(),o=Object(i.c)((function(e){return e.getBooks.books})).filter((function(e){return e._id===t.params.id}))[0],l=r[o._id]>Date.now()||!1,u=function(){if(!c)return s(ce());document.querySelector(".add-cart-btn").classList.toggle("in-cart-btn"),a[o._id]?s(P(o._id)):s(J(o._id))},d=function(){if(!c)return s(ce());document.querySelector(".follow-btn").classList.toggle("followed-btn"),n[o._id]?s(N(o._id)):s(S(o._id))};return Object(q.jsxs)("div",{className:"book-screen",children:[Object(q.jsxs)("div",{className:"book-screen-left",children:[Object(q.jsx)("div",{className:"left-img",children:Object(q.jsx)("img",{src:o.imageUrl,alt:o.title})}),Object(q.jsxs)("div",{className:"left-info",children:[Object(q.jsx)("p",{className:"left-name",children:o.title}),Object(q.jsx)("p",{className:"left-author",children:o.author}),Object(q.jsxs)("p",{className:"left-price",children:["Rent for 30 days: ",o.price," ",o.currency]}),Object(q.jsx)("p",{className:"left-description",children:o.description})]})]}),Object(q.jsx)("div",{className:"book-screen-right",children:Object(q.jsxs)("div",{className:"right-buttons",children:[l?Object(q.jsx)("div",{className:"btn add-cart-btn purchased-btn",children:"Purchased"}):a[o._id]?Object(q.jsx)("div",{className:"btn add-cart-btn in-cart-btn",onClick:u,children:"In cart"}):Object(q.jsx)("div",{className:"btn add-cart-btn",onClick:u,children:"Add to Cart"}),n[o._id]?Object(q.jsx)("div",{className:"btn follow-btn followed-btn",onClick:d,children:"Unfollow"}):Object(q.jsx)("div",{className:"btn follow-btn",onClick:d,children:"Follow"})]})})]})}c(83);function oe(e){var t=e.history,c=Object(n.useState)(5),a=Object(o.a)(c,2),r=a[0],s=a[1],l=Object(i.b)(),u=Object(i.c)((function(e){var t;return null===(t=e.auth.data)||void 0===t?void 0:t.id})),j=Object.keys(Object(i.c)((function(e){return e.cart})));return Object(n.useEffect)((function(){u&&y.a.put("/api/user/".concat(u,"/purchasedBooks"),{purchasedBooks:j}).then((function(){return l(function(){var e=Object(b.a)(d.a.mark((function e(t,c){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c().auth.data.id,e.next=3,y.a.get("/api/user/".concat(n));case 3:a=e.sent,r=a.data,t({type:v,payload:r.purchased});case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}())})),l(K())}),[]),Object(n.useEffect)((function(){setTimeout((function(){return t.push("/")}),5e3)})),Object(n.useEffect)((function(){var e=setTimeout((function(){return s((function(e){return e-1}))}),1e3);return function(){clearTimeout(e)}})),Object(q.jsxs)("div",{className:"success-screen",children:[Object(q.jsx)("h2",{children:"Payment Success"}),Object(q.jsx)("p",{children:"".concat(r," secs redirects to shop")}),Object(q.jsx)(M.b,{id:"back-to-shop",to:"/",children:" Back to shop "})]})}c(84),c(85);function ie(e){var t=e.itemId,c=Object(i.c)((function(e){return e.auth.data})).id,n=Object(i.c)((function(e){return e.getBooks.books})).filter((function(e){return e._id===t}))[0],a=Object(i.c)((function(e){return e.auth.data.purchasedBooks}))[t]-Date.now(),r=function(){var e=Object(b.a)(d.a.mark((function e(){var n,a,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/books/viewer/".concat(t,"?userId=").concat(c));case 2:n=e.sent,a=n.data,r=a.success,s=a.error,r?alert(r):alert(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"purchased-view",children:[Object(q.jsx)("img",{src:n.imageUrl,alt:n.title}),Object(q.jsxs)("div",{className:"purchased-book-info",children:[Object(q.jsx)("span",{children:n.title}),Object(q.jsx)("span",{children:n.author}),a>864e5?Object(q.jsx)("p",{className:"expires",children:"Expires in ".concat(Math.floor(a/1e3/3600/24)," days")}):Object(q.jsx)("p",{className:"expires-urgent",children:"Expires in ".concat(Math.floor(a/1e3/3600)," hours")})]}),Object(q.jsx)("div",{className:"btn read-btn",onClick:r,children:"Read"})]})}function le(){var e=Object(i.c)((function(e){return e.auth.data})),t=e.user,c=e.purchasedBooks,n=void 0===c?{}:c,a=Object.keys(n);return Object(q.jsxs)("div",{className:"purchase-screen",children:[Object(q.jsxs)("h2",{children:["Hi ",t,", here is your available books, enjoy!"]}),Object(q.jsx)("div",{className:"purchase-screen-container",children:a.map((function(e){return Object(q.jsx)(ie,{itemId:e},e+"-view")}))})]})}var ue=c(6),de=c(20),je=["component","loginStatus"];function be(e){var t=e.component,c=e.loginStatus,n=Object(de.a)(e,je);return Object(q.jsx)(ue.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return c?Object(q.jsx)(t,Object(j.a)({},e)):Object(q.jsx)(ue.a,{to:"/"})}}))}var Oe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.modal})),c=t.login,a=t.register,r=Object(i.c)((function(e){return e.auth.login})),s=Object(n.useState)(!1),l=Object(o.a)(s,2),u=l[0],d=l[1],j=Object(n.useState)(!1),b=Object(o.a)(j,2),O=b[0],h=b[1],p=function(){e(c?ne():ce())},f=function(){e(ce()),h(!1)},m=function(){e(ne()),h(!1)},v=function(){c&&e((function(e){e({type:Z})})),a&&e((function(e){e({type:te})})),d(!1),h(!1)},g=function(){return d(!0)};return Object(q.jsx)(M.a,{children:Object(q.jsxs)("div",{className:"app",children:[Object(q.jsx)(H,{loginButton:f,registerButton:m,showCartPreview:g,showSideDrawer:function(){return h(!0)}}),Object(q.jsx)(V,{status:O,loginButton:f,registerButton:m,showCartPreview:g,closeAll:v}),Object(q.jsx)(Q,{name:"Register",message:"Already has an account?",link:"login",handleFormSwitch:p,status:a,closeAll:v}),Object(q.jsx)(Q,{name:"Login",message:"Do not have an account?",link:"register",handleFormSwitch:p,status:c,closeAll:v}),Object(q.jsx)("main",{children:Object(q.jsxs)(ue.d,{children:[Object(q.jsx)(ue.b,{exact:!0,path:"/",component:re}),Object(q.jsx)(ue.b,{exact:!0,path:"/book/:id",component:se}),Object(q.jsx)(ue.b,{exact:!0,path:"/cart",component:X}),Object(q.jsx)(be,{exact:!0,path:"/success",loginStatus:r,component:oe}),Object(q.jsx)(be,{exact:!0,path:"/user",loginStatus:r,component:le})]})}),Object(q.jsx)($,{status:u,closeAll:v}),Object(q.jsx)("div",{id:"overlay",className:c||a||u||O?"active":"",onClick:v})]})})},he=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,87)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))},pe=c(23),fe=c(41),me=c(42),ve=c(27),ge=Object(pe.combineReducers)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,c=t.payload;switch(t.type){case A:return e[c.id]?e:Object(j.a)(Object(j.a)({},e),c);case U:var n=t.payload,a=(e[n],Object(de.a)(e,[n].map(ve.a)));return a;case D:return{};default:return e}},payment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{destination:t.destination};case G:return{error:t.error};default:return e}},getBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{books:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{loading:!0,books:[]};case _:return{loading:!1,books:t.payload};case E:return{loading:!1,error:t.payload};default:return e}},getBookDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{book:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return{loading:!0};case I:return{loading:!1,book:t.payload};case T:return{loading:!1,error:t.payload};case L:return{book:{}};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{login:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case p:return{data:Object(j.a)(Object(j.a)({},e.data),t.payload),login:!0};case m:return{data:t.payload,login:!1};case h:case f:return{error:t.payload};case v:return Object(j.a)(Object(j.a)({},e),{},{data:Object(j.a)(Object(j.a)({},e.data),{},{purchasedBooks:t.payload})});case g:return Object(j.a)(Object(j.a)({},e),{},{data:Object(j.a)(Object(j.a)({},e.data),{},{followedBooks:Object(j.a)(Object(j.a)({},e.data.followedBooks),{},Object(R.a)({},t.payload,!0))})});case x:var c=e.data.followedBooks,n=t.payload,a=(c[n],Object(de.a)(c,[n].map(ve.a)));return Object(j.a)(Object(j.a)({},e),{},{data:Object(j.a)(Object(j.a)({},e.data),{},{followedBooks:a})});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{login:!1,register:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{login:!0,register:!1};case Z:return Object(j.a)(Object(j.a)({},e),{},{login:!1});case ee:return{register:!0,login:!1};case te:return Object(j.a)(Object(j.a)({},e),{},{register:!1});default:return e}}}),xe=[fe.a],ke=new Date,ye={cart:localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):{},getBooks:{books:localStorage.getItem("books")&&JSON.parse(localStorage.getItem("books")).expire>ke.getTime()?JSON.parse(localStorage.getItem("books")).value:[]},getBookDetails:{book:localStorage.getItem("book")?JSON.parse(localStorage.getItem("book")):{}},payment:{destination:null},auth:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{}},we=Object(pe.createStore)(ge,ye,Object(me.composeWithDevTools)(pe.applyMiddleware.apply(void 0,xe))),Se=c(18),Ne=c(21);Se.b.add(Ne.d,Ne.a,Ne.b,Ne.c,Ne.e),s.a.render(Object(q.jsx)(i.a,{store:we,children:Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(Oe,{})})}),document.getElementById("root")),he()}},[[86,1,2]]]);
//# sourceMappingURL=main.9d88ea44.chunk.js.map